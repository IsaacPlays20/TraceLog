:root {
    --sidebar: 320px; 
    --primary: #2563eb; 
    --accent: #10b981;
    --bg: #f8fafc; 
    --card: #ffffff; 
    --text: #0f172a; 
    --border: #e2e8f0;
}

.dark-theme { 
    --bg: #0f172a; 
    --card: #1e293b; 
    --text: #f1f5f9; 
    --border: #334155; 
}

body, html { 
    margin: 0; 
    padding: 0; 
    height: 100%; 
    font-family: 'Inter', sans-serif; 
    overflow: hidden; 
    background: var(--bg); 
    color: var(--text); 
}

#app { display: flex; height: 100vh; }

#sidebar { 
    width: var(--sidebar); 
    background: var(--card); 
    border-right: 1px solid var(--border); 
    display: flex; 
    flex-direction: column; 
    z-index: 2000; 
    height: 100vh; 
    box-sizing: border-box; 
}

.sidebar-header { padding: 20px 20px 0 20px; flex-shrink: 0; }
.logo-row { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; }

#backBtn { 
    display: none; 
    background: var(--border); 
    border: none; 
    padding: 5px 10px; 
    border-radius: 6px; 
    cursor: pointer; 
    font-weight: 800; 
    font-size: 10px; 
    color: var(--text);
}

#mainSearch {
    width:100%; 
    padding:12px; 
    border-radius:8px; 
    border:1px solid var(--border); 
    background:var(--bg); 
    color:var(--text); 
    box-sizing:border-box; 
    margin-bottom:15px;
}

.tab-nav { display: flex; gap: 10px; margin-bottom: 15px; border-bottom: 1px solid var(--border); padding-bottom: 10px; }
.tab-btn { flex: 1; padding: 10px; border: none; background: rgba(0,0,0,0.03); border-radius: 8px; font-weight: 700; cursor: pointer; color: var(--text); opacity: 0.5; transition: 0.2s; font-size: 12px; }
.tab-btn.active { opacity: 1; background: var(--primary); color: white; }

.sidebar-scroll-area { flex: 1; overflow-y: auto; padding: 0 20px; margin: 15px 0; display: flex; flex-direction: column; }
.sidebar-scroll-area::-webkit-scrollbar { width: 4px; }
.sidebar-scroll-area::-webkit-scrollbar-thumb { background: var(--border); border-radius: 10px; }

.sidebar-footer { padding: 0 20px 20px 20px; flex-shrink: 0; position: relative; }
#map { flex-grow: 1; z-index: 1; position: relative; }

/* SETTINGS POP-OUT */
#settingsMenu { 
    display: none; 
    position: absolute; 
    bottom: 70px; 
    left: 20px; 
    right: 20px; 
    background: var(--card); 
    border: 1px solid var(--border); 
    border-radius: 12px; 
    padding: 15px; 
    box-shadow: 0 10px 25px rgba(0,0,0,0.1); 
    z-index: 3000;
}
.settings-row { display: flex; justify-content: space-between; align-items: center; gap: 10px; margin-bottom: 10px; }
.settings-row:last-child { margin-bottom: 0; }
.toggle-box { flex: 1; display: flex; flex-direction: column; align-items: center; padding: 8px; border: 1px solid var(--border); border-radius: 10px; background: rgba(0,0,0,0.01); }

.switch { position: relative; display: inline-block; width: 40px; height: 20px; margin-top: 5px;}
.slider { position: absolute; cursor: pointer; inset: 0; background-color: #cbd5e1; transition: .4s; border-radius: 20px; }
.slider:before { position: absolute; content: ""; height: 14px; width: 14px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
input:checked + .slider { background-color: var(--primary); }
input:checked + .slider:before { transform: translateX(20px); }

.filter-container { margin-bottom: 15px; display: flex; flex-direction: column; gap: 6px; }
.filter-row { display: flex; gap: 6px; }
.filter-btn { flex: 1; border: none; background: #64748b; padding: 8px; font-size: 10px; font-weight: 700; cursor: pointer; border-radius: 8px; color: white; transition: 0.2s; opacity: 0.6; }
.filter-btn.active { background: var(--primary); opacity: 1; }

.gps-indicator-wrapper { position: relative; width: 14px; height: 14px; display: flex; align-items: center; justify-content: center; }
.gps-indicator { width: 14px !important; height: 14px !important; background: #2563eb; border: 2px solid white; border-radius: 50% !important; z-index: 2; flex-shrink: 0; aspect-ratio: 1/1; }
.gps-pulse { position: absolute; width: 32px !important; height: 32px !important; background: rgba(37, 99, 235, 0.4); border-radius: 50% !important; animation: pulse 2s infinite; z-index: 1; flex-shrink: 0; aspect-ratio: 1/1; }
@keyframes pulse { 0% { transform: scale(0.5); opacity: 1; } 100% { transform: scale(2.5); opacity: 0; } }

.highlight-item { display: flex; align-items: center; gap: 10px; padding: 10px; background: rgba(0,0,0,0.03); border-radius: 10px; margin-bottom: 8px; cursor: pointer; border: 1px solid transparent; }
.highlight-thumb { width: 48px; height: 48px; border-radius: 8px; object-fit: cover; background: #ddd; flex-shrink: 0; }
.type-label { font-size: 9px; font-weight: 800; text-transform: uppercase; padding: 2px 5px; background: var(--primary); color: white; border-radius: 3px; display: inline-block; margin-bottom: 3px; }

#detail-view { display: none; flex-direction: column; gap: 8px; }
.edit-input { width: 100%; background: transparent; border: 1px solid transparent; border-radius: 6px; padding: 2px 5px; color: var(--text); font-family: inherit; box-sizing: border-box; pointer-events: none;}
.edit-input.active { border: 1px solid var(--border); background: var(--bg); pointer-events: auto; }
#editTitle { font-size: 1.6rem; font-weight: 900; white-space: normal; overflow-wrap: break-word; line-height: 1.1; margin-bottom: 0; }
.rating-stars { color: #fbbf24; font-size: 1.8rem; display: flex; gap: 6px; margin-top: -2px; }
#editDesc { font-size: 1.1rem; line-height: 1.5; opacity: 0.9; }
.info-card { background: rgba(0,0,0,0.02); padding: 10px; border-radius: 10px; border: 1px solid var(--border); }
.stat-line { font-size: 11px; font-weight: bold; opacity: 0.7; padding: 2px 5px; line-height: 1.4; }

.zoom-controls { position: absolute; bottom: 30px; right: 20px; z-index: 1000; display: flex; flex-direction: column; gap: 8px; }
.zoom-btn { width: 45px; height: 45px; background: var(--card); border: 1px solid var(--border); border-radius: 10px; font-size: 22px; cursor: pointer; color: var(--text); display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
.btn { width: 100%; padding: 12px; border-radius: 8px; border: none; font-weight: 600; cursor: pointer; margin-bottom: 10px; transition: 0.2s; }
.btn-main { background: #64748b; color: white; }
.btn-main.active-mode { background: var(--primary); }

.btn-actions { display: flex; gap: 8px; align-items: center; margin-top: 10px; }
.btn-edit { background: var(--primary); color: white; padding: 10px 20px; font-size: 13px; font-weight: 700; border-radius: 8px; width: auto; border: none; cursor: pointer; }
.btn-edit.active-saving { background: var(--accent); }
.btn-delete { color: red; border: 1px solid red; background: none; padding: 10px 15px; border-radius: 8px; font-size: 11px; font-weight: bold; cursor: pointer; }

.btn-upload { background: var(--border); color: var(--text); padding: 8px 12px; font-size: 11px; border-radius: 6px; cursor: pointer; display: inline-block; font-weight: bold; }
#elevation-dock { position: absolute; bottom: -280px; left: 20px; right: 20px; height: 260px; background: var(--card); border-radius: 12px 12px 0 0; border: 1px solid var(--border); z-index: 1500; padding: 15px; transition: 0.4s ease; box-shadow: 0 -5px 15px rgba(0,0,0,0.1); }
#elevation-dock.active { bottom: 0; }
#modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; z-index: 4000; }
.modal { background: var(--card); padding: 20px; border-radius: 15px; width: 320px; display: flex; flex-direction: column; gap: 0px; }
